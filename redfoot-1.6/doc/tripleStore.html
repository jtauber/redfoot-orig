<html>
  <head>
    <title>Triple Store</title>
    <link REL="STYLESHEET" HREF="redfoot.css"/>
  </head>
  <body>
    <div CLASS="NAV"><a href="../index.html">Redfoot</A> &gt; <a href="./index.html">Documentation</a></div>
    <h1>Triple Store</h1>

    <p>
      At the very core of Redfoot is the notion of a TripleStore, a
place to add, remove and query for triples.
    </p>

    <p>
      The triples in the store are of the form subject, predicate,
object where:
    </p>

    <ul>
      <li>subject and predicate are instances of <CODE>Resource</CODE></li>
      <li>object is an instance of <CODE>Resource</CODE> or <CODE>Literal</CODE></li>
    </ul>

    <p>
      Resource and Literal are defined in
redfootlib/rdf/objects.py. These objects are created via <CODE>Resource(<VAR>uri</VAR>)</CODE> and
<CODE>Literal(<VAR>value</VAR>)</CODE>. <span class="ednote">A document further describing these objects(?) is on the TODO list... as is flushing out anonymous resources etc.</span>
    </p>

    <p class="ednote">
      Currently Redfoot's in memory store implementation doesn't care what type of python objects are used for the subject, predicate and object. This has the undesireable effect of finding out the hard way further down the road... as subject, predicate and object are assumed to be of type Resource or Literal elsewhere. Need to figure out where is the best place to enforce the usage of correct object types?
    </p>

    <h2>Interface</h2>
    <p>
      The use of <CODE>None</CODE> in the following methods indicates that any value will match.
    </p>

    <p>The methods <CODE>triples, subjects, predicate, etc</CODE> are python generators.
    </p>

    <h3>Layer 0</h3>
    <p>
      The core layer a triple store backend must implement. Currently
Redfoot has an <a href="../lib/redfootlib/rdf/store/memory.py">in memory triple store backend</a> and a Berkeley DB backed
triple store in the works. 
    </p>

    <ul>
      <li><code>add(<var>subject</var>, <var>predicate</var>, <var>object</var>)</code></li>
      <li><code>remove(<var>subject</var>, <var>predicate</var>, <var>object</var>)</code></li>
      <li><code>triples(<var>subject</var>=None, <var>predicate</var>=None, <var>object</var>=None)</code></li>
    </ul>

    <ul>
      <li><code>subjects(<var>predicate</var>=None, <var>object</var>=None)</code></li>
      <li><code>predicates(<var>subject</var>=None, <var>object</var>=None)</code></li>
      <li><code>objects(<var>subject</var>=None, <var>predicate</var>=None)</code></li>
    </ul>

    <ul>
      <li><code>subject_predicates(<var>object</var>=None)</code></li>
      <li><code>subject_objects(<var>predicate</var>=None)</code></li>
      <li><code>predicate_objects(<var>subject</var>=None)</code></li>
    </ul>

    <h3>Layer 1</h3>
    <ul>
      <li><code>generate_uri()</code></li>
      <li><code>remove(<var>subject</var>=None, <var>predicate</var>=None, <var>object</var>=None)</code></li>
      <li><code>__iter__()</code></li>
    </ul>

    <h3>Layer 2</h3>
    <ul>
      <li><code>exists(<var>subject</var>=None, <var>predicate</var>=None, <var>object</var>=None)</code></li>
      <li><code>first_object(<var>subject</var>=None, <var>predicate</var>=None)</code></li>
      <li><code>transitive_objects(<var>subject</var>=None, <var>property</var>=None)</code></li>
      <li><code>transitive_subjects(<var>predicate</var>=None, <var>object</var>=None)</code></li>
    </ul>
    
    <H4>Code Example</H4>
    
    <PRE CLASS="code_sample">
from redfootlib.rdf.store.triple import TripleStore
from redfootlib.rdf.objects import resource, literal
from redfootlib.rdf.const import LABEL

store = TripleStore()
store.add(resource("http://redfoot.net/"), LABEL, literal("Redfoot Network Website"))

for s, p, o in store:   # enabled by the layer 1 __iter__ method
    print s, p, o

for predicate in store.predicates(resource("http://redfoot.net/"), None)
    print predicate
    </PRE>

    <p class="cvs_id">$Id$</p>

  </body>
</html>
