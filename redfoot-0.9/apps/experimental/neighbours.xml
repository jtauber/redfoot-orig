<r:module name="neighbours" xmlns:r="http://redfoot.sourceforge.net/2001/01/">

import sys

from rdf.const import *
from rdf.literal import *

NEIGHBOUR = "http://redfoot.sourceforge.net/2001/04/neighbour#Neighbour"

from redfoot.editor import Editor

<r:class name="UI" bases="(Editor,)">

def __init__(self, rednode):
    self.rednode = rednode
    Editor.__init__(self, rednode)
    self._load_neighbours()
    self.showNeighbours=1

def _load_neighbours(self):
    neighbours = self.rednode.get(None, TYPE, NEIGHBOUR)
    for neighbour in neighbours:
        location = neighbour[0]
        location = location.encode('ascii') # TODO: ?
        self.rednode.connectTo(location)

def handle_request(self, request, response):
    # For now, write log to stderr.
    path_info = request.getPathInfo()
    sys.stderr.write(path_info+"\n")
    sys.stderr.flush()

    Editor.handle_request(self, request, response)

</r:class>

</r:module>
